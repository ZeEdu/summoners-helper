<ion-header>
  <ion-row>
    <ion-col size-lg="6" offset-lg="3">
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-back-button
            [defaultHref]="['/', 'home','tabs','settings']"
          ></ion-back-button>
        </ion-buttons>
        <ion-title>Delete Account</ion-title>
      </ion-toolbar>
    </ion-col>
  </ion-row>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col offset-lg="3" size-lg="6">
        <ion-item>
          <p>
            Para que você possa cancelar a sua conta, escreva nos campos as
            informação indicadas
          </p>
        </ion-item>
        <form [formGroup]="form" (ngSubmit)="handleSubmit()">
          <ion-item>
            <ion-label position="stacked">
              Your username
            </ion-label>
            <ion-input
              type="text"
              class="form-control"
              id="username"
              name="username"
              formControlName="username"
            ></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">
              Your email:
            </ion-label>
            <ion-input
              type="email"
              class="form-control"
              id="email"
              name="email"
              formControlName="email"
            ></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="stacked">
              Your password:
            </ion-label>
            <ion-input
              type="password"
              class="form-control"
              id="password"
              name="password"
              formControlName="password"
            ></ion-input>
          </ion-item>

          <ion-button
            [disabled]="form.invalid || isLoading"
            type="submit"
            color="danger"
            expand="block"
            bottom
          >
            <ng-container *ngIf="!isLoading">
              Delete Account
            </ng-container>
            <ng-container *ngIf="isLoading">
              Loading...
            </ng-container>
          </ion-button>

          <ion-item
            *ngIf="form.controls.email.hasError('required') &&
						 form.controls.email.pristine == false"
          >
            <ion-label>
              <ion-text color="danger">
                Email is required
              </ion-text>
            </ion-label>
          </ion-item>
          <ion-item
            *ngIf="form.controls.username.hasError('required') &&
						 form.controls.username.pristine == false"
          >
            <ion-label>
              <ion-text color="danger">
                Username is required
              </ion-text>
            </ion-label>
          </ion-item>
          <ion-item
            *ngIf="form.controls.password.hasError('required') &&
						 form.controls.password.pristine == false"
          >
            <ion-label>
              <ion-text color="danger">
                Password is required
              </ion-text>
            </ion-label>
          </ion-item>

          <ng-container *ngIf="errors.length > 0">
            <ion-list>
              <ion-item *ngFor="let error of errors">
                <ion-label>
                  <ion-text color="danger">
                    {{error}}
                  </ion-text>
                </ion-label>
              </ion-item>
            </ion-list>
          </ng-container>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
